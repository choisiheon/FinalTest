<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>글 상세보기</title>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/board.js}"></script>
</head>
<body>
<h1>글 상세보기</h1>

<script th:if="${param.error == 'duplicate'}">
    alert('이미 신청한 모임입니다.');
</script>

<table border="1">
    <tr>
        <th>번호</th><td th:text="${board.boardNum}"></td>
        <th>카테고리</th><td th:text="${board.category}"></td>
        <th>주최자</th><td th:text="${board.memberId}"></td>
    </tr>
    <tr>
        <th>모집인원</th><td th:text="|${board.headcnt}/${board.capacity}|"></td>
        <th>모집현황</th>
        <td th:text="${board.status}" th:class="${board.status == 'OPEN' ? 'blue' : 'red'}"></td>
        <th>작성일</th><td th:text="${board.createDate}"></td>
    </tr>
    <tr>
        <th>제목</th><td colspan="5" th:text="${board.title}"></td>
    </tr>
    <tr>
        <th>내용</th><td colspan="5" th:text="${board.contents}" style="height:100px; text-align: left;"></td>
    </tr>
</table>

<div style="margin-top: 20px;">
    <span th:if="${#authentication.name == board.memberId}">
        <button type="button" th:onclick="|location.href='@{/board/applicants(boardNum=${board.boardNum})}'|">확인하기</button>
        <button type="button" th:onclick="|checkDelete(${board.boardNum})|">삭제하기</button>
    </span>

    <span th:if="${#authentication.name != board.memberId and board.status == 'OPEN'}">
        <button type="button" th:onclick="|checkApply(${board.boardNum})|">신청하기</button>
    </span>

    <span th:if="${#authentication.name != board.memberId and board.status == 'CLOSED'}">
        <span class="red">마감되었습니다.</span>
    </span>

    <button type="button" onclick="location.href='/board/list'">목록으로</button>
</div>
</body>
</html>